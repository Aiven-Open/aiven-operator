<!doctype html><html lang=en class=no-js>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=generator content="Hugo 0.88.1"><link rel=alternate type=application/rss+xml href=https://aiven.github.io/aiven-operator/docs/installation/uninstalling/index.xml>
<meta name=ROBOTS content="NOINDEX, NOFOLLOW">
<link rel="shortcut icon" href=/aiven-operator/favicons/favicon.ico>
<link rel=apple-touch-icon href=/aiven-operator/favicons/apple-touch-icon-180x180.png sizes=180x180>
<link rel=icon type=image/png href=/aiven-operator/favicons/favicon-16x16.png sizes=16x16>
<link rel=icon type=image/png href=/aiven-operator/favicons/favicon-32x32.png sizes=32x32>
<link rel=icon type=image/png href=/aiven-operator/favicons/android-36x36.png sizes=36x36>
<link rel=icon type=image/png href=/aiven-operator/favicons/android-48x48.png sizes=48x48>
<link rel=icon type=image/png href=/aiven-operator/favicons/android-72x72.png sizes=72x72>
<link rel=icon type=image/png href=/aiven-operator/favicons/android-96x96.png sizes=96x96>
<link rel=icon type=image/png href=/aiven-operator/favicons/android-144x144.png sizes=144x144>
<link rel=icon type=image/png href=/aiven-operator/favicons/android-192x192.png sizes=192x192>
<title>Uninstalling | Aiven Operator</title>
<meta name=description content="Aiven Operator"><meta property="og:title" content="Uninstalling">
<meta property="og:description" content="Aiven Operator">
<meta property="og:type" content="website">
<meta property="og:url" content="https://aiven.github.io/aiven-operator/docs/installation/uninstalling/"><meta property="og:site_name" content="Aiven Operator">
<meta itemprop=name content="Uninstalling">
<meta itemprop=description content="Aiven Operator"><meta name=twitter:card content="summary">
<meta name=twitter:title content="Uninstalling">
<meta name=twitter:description content="Aiven Operator">
<link rel=preload href=/aiven-operator/scss/main.min.0645ef8325971f852fa3823ea7990dfb6dd145515ff1f30281947d1317099f02.css as=style>
<link href=/aiven-operator/scss/main.min.0645ef8325971f852fa3823ea7990dfb6dd145515ff1f30281947d1317099f02.css rel=stylesheet integrity>
<script src=https://code.jquery.com/jquery-3.5.1.min.js integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin=anonymous></script>
</head>
<body class=td-section>
<header>
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
<a class=navbar-brand href=/aiven-operator/>
<span class=navbar-logo><svg id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 229.6 201.3" style="enable-background:new 0 0 229.6 201.3"><style>.st0{fill:url(#SVGID_1_)}.st1{fill:url(#SVGID_2_)}.st2{fill:url(#SVGID_3_)}.st3{fill:url(#SVGID_4_)}.st4{fill:url(#SVGID_5_)}.st5{fill:url(#SVGID_6_)}.st6{fill:url(#SVGID_7_)}.st7{fill:url(#SVGID_8_)}.st8{fill:url(#SVGID_9_)}</style><g><g><linearGradient id="SVGID_1_" gradientUnits="userSpaceOnUse" x1="82.3543" y1="154.7934" x2="153.6936" y2="58.3532"><stop offset="0" style="stop-color:#FF7700"/><stop offset=".7423" style="stop-color:#FF3554"/></linearGradient><path class="st0" d="M159.4 123.8c2.8.0 5.5.5 8 1.4 4-4.6 6.1-9.6 6.1-14.8.0-8.5-5.8-16.7-16.2-23.1-11.2-6.8-26.2-10.6-42.1-10.6h0c-16 0-31 3.8-42.1 10.6-10.5 6.4-16.2 14.6-16.2 23.1.0 5.2 2.1 10.2 6.1 14.8 2.5-.9 5.2-1.4 8-1.4 6.3.0 12.2 2.4 16.6 6.9 3.1 3.1 5.2 6.9 6.2 11.1 6.7 1.6 13.9 2.4 21.4 2.4 7.4.0 14.6-.8 21.4-2.4 1-4.1 3.1-8 6.2-11.1C147.2 126.2 153.1 123.8 159.4 123.8zm-44.2-19.6c-7.2.0-13.1-5.9-13.1-13.1h26.2C128.3 98.3 122.4 104.2 115.2 104.2z"/></g><g><linearGradient id="SVGID_2_" gradientUnits="userSpaceOnUse" x1="33.0471" y1="118.3196" x2="104.3864" y2="21.8794"><stop offset="0" style="stop-color:#FF7700"/><stop offset=".7423" style="stop-color:#FF3554"/></linearGradient><path class="st1" d="M69.9 81.1c1.3-.8 2.6-1.5 3.9-2.2h-.1c-3.3-2.5-7.2-3.7-11.1-3.7-5.6.0-11.1 2.5-14.7 7.3l-1.5 2.1 10.4 7.8C60 88.2 64.4 84.4 69.9 81.1z"/></g><g><linearGradient id="SVGID_3_" gradientUnits="userSpaceOnUse" x1="41.521" y1="124.588" x2="112.8603" y2="28.1478"><stop offset="0" style="stop-color:#FF7700"/><stop offset=".7423" style="stop-color:#FF3554"/></linearGradient><path class="st2" d="M56.9 128.5c-3.5-4.5-5.7-9.4-6.3-14.5-.2-1.2-.3-2.4-.3-3.6.0-6 2-11.7 5.7-16.9h-1.3c-10.2.0-18.4 8.3-18.4 18.4v2.6H50c-3.6 3-5.9 7.1-6.5 11.7-.7 4.9.6 9.7 3.6 13.6l1.1 1.5c1-4 3.1-7.6 6.1-10.6C55.2 129.8 56 129.1 56.9 128.5z"/></g><g><linearGradient id="SVGID_4_" gradientUnits="userSpaceOnUse" x1="104.3141" y1="171.0377" x2="175.6534" y2="74.5975"><stop offset="0" style="stop-color:#FF7700"/><stop offset=".7423" style="stop-color:#FF3554"/></linearGradient><path class="st3" d="M173.6 92.4l10.4-7.8-1.5-2.1c-3.6-4.8-9.1-7.3-14.7-7.3-3.9.0-7.7 1.2-11.1 3.7h-.1c1.3.7 2.7 1.4 3.9 2.2C166 84.4 170.4 88.2 173.6 92.4z"/></g><g><linearGradient id="SVGID_5_" gradientUnits="userSpaceOnUse" x1="126.4632" y1="187.4219" x2="197.8025" y2="90.9818"><stop offset="0" style="stop-color:#FF7700"/><stop offset=".7423" style="stop-color:#FF3554"/></linearGradient><path class="st4" d="M194.1 111.9c0-10.2-8.3-18.4-18.4-18.4h-1.3c3.8 5.2 5.7 11 5.7 16.9.0 1.2-.1 2.4-.3 3.6-.7 5.1-2.9 10-6.3 14.5.9.7 1.8 1.4 2.6 2.2 3 3 5.1 6.6 6.1 10.6l1.1-1.5c3-3.9 4.3-8.8 3.6-13.6-.6-4.6-2.9-8.8-6.5-11.7h13.7V111.9z"/></g><g><linearGradient id="SVGID_6_" gradientUnits="userSpaceOnUse" x1="41.092" y1="124.2706" x2="112.4313" y2="27.8304"><stop offset="0" style="stop-color:#FF7700"/><stop offset=".7423" style="stop-color:#FF3554"/></linearGradient><path class="st5" d="M93.1 72.4c10.2.0 18.4-8.3 18.4-18.4.0-10.2-8.3-18.4-18.4-18.4-10.2.0-18.4 8.3-18.4 18.4C74.6 64.2 82.9 72.4 93.1 72.4zm0-28.5c-1.2 1.3-2 3.1-2 5.1.0 3.9 3.2 7.1 7.1 7.1 2 0 3.8-.8 5.1-2.1v.1c0 5.6-4.5 10.1-10.1 10.1C87.5 64.1 83 59.6 83 54s4.5-10.1 10.1-10.1z"/></g><g><linearGradient id="SVGID_7_" gradientUnits="userSpaceOnUse" x1="69.7399" y1="145.4622" x2="141.0792" y2="49.022"><stop offset="0" style="stop-color:#FF7700"/><stop offset=".7423" style="stop-color:#FF3554"/></linearGradient><path class="st6" d="M137.4 72.4c10.2.0 18.4-8.3 18.4-18.4.0-10.2-8.3-18.4-18.4-18.4-10.2.0-18.4 8.3-18.4 18.4.0 10.2 8.2 18.4 18.4 18.4zm0-28.5c-1.2 1.3-2 3.1-2 5.1.0 3.9 3.2 7.1 7.1 7.1 2 0 3.8-.8 5.1-2.1v.1c0 5.6-4.5 10.1-10.1 10.1s-10.1-4.5-10.1-10.1C127.3 48.4 131.8 43.9 137.4 43.9z"/></g><g><linearGradient id="SVGID_8_" gradientUnits="userSpaceOnUse" x1="71.0978" y1="146.4667" x2="142.4371" y2="50.0265"><stop offset="0" style="stop-color:#FF7700"/><stop offset=".7423" style="stop-color:#FF3554"/></linearGradient><path class="st7" d="M71 128.9c-10.2.0-18.4 8.2-18.4 18.4.0 10.2 8.2 18.4 18.4 18.4 2.1.0 4.2-.4 6.1-1.1-.2-.2-.4-.3-.5-.5-5.3-5.3-7.2-12.2-4-15.3 3.1-3.1 10-1.3 15.3 4 .2.2.3.4.5.5.7-1.9 1.1-3.9 1.1-6.1C89.4 137.1 81.2 128.9 71 128.9z"/></g><g><linearGradient id="SVGID_9_" gradientUnits="userSpaceOnUse" x1="128.5964" y1="188.9998" x2="199.9357" y2="92.5597"><stop offset="0" style="stop-color:#FF7700"/><stop offset=".7423" style="stop-color:#FF3554"/></linearGradient><path class="st8" d="M159.5 128.9c-10.2.0-18.4 8.2-18.4 18.4.0 2.1.4 4.2 1.1 6.1.2-.2.3-.4.5-.5 5.3-5.3 12.2-7.2 15.3-4 3.1 3.1 1.3 10-4 15.3-.2.2-.3.3-.5.5 1.9.7 3.9 1.1 6.1 1.1 10.2.0 18.4-8.2 18.4-18.4C177.9 137.1 169.6 128.9 159.5 128.9z"/></g></g></svg></span><span class="text-uppercase font-weight-bold">Aiven Operator</span>
</a>
<div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar>
<ul class="navbar-nav mt-2 mt-lg-0">
</ul>
</div>
<div class="navbar-nav d-none d-lg-block">
</div>
</nav>
</header>
<div class="container-fluid td-outer">
<div class=td-main>
<div class="row flex-xl-nowrap">
<aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
<div id=td-sidebar-menu class=td-sidebar__inner>
<form class="td-sidebar__search d-flex align-items-center">
<button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type=button data-toggle=collapse data-target=#td-section-nav aria-controls=td-docs-nav aria-expanded=false aria-label="Toggle section navigation">
</button>
</form>
<nav class="collapse td-sidebar-nav" id=td-section-nav>
<ul class="td-sidebar-nav__section pr-md-3 ul-0">
<li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-aiven-operator-li>
<a href=/aiven-operator/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-aiven-operator><span></span></a>
<ul class=ul-1>
<li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-aiven-operatordocsinstallation-li>
<a href=/aiven-operator/docs/installation/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-aiven-operatordocsinstallation><span>Installation</span></a>
<ul class="ul-2 foldable">
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-aiven-operatordocsinstallationprerequisites-li>
<a href=/aiven-operator/docs/installation/prerequisites/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-aiven-operatordocsinstallationprerequisites><span>Prerequisites</span></a>
</li>
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-aiven-operatordocsinstallationhelm-li>
<a href=/aiven-operator/docs/installation/helm/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-aiven-operatordocsinstallationhelm><span>Installing with Helm (recommended)</span></a>
</li>
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-aiven-operatordocsinstallationkubectl-li>
<a href=/aiven-operator/docs/installation/kubectl/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-aiven-operatordocsinstallationkubectl><span>Installing with kubectl</span></a>
</li>
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id=m-aiven-operatordocsinstallationuninstalling-li>
<a href=/aiven-operator/docs/installation/uninstalling/ class="align-left pl-0 active td-sidebar-link td-sidebar-link__section" id=m-aiven-operatordocsinstallationuninstalling><span class=td-sidebar-nav-active-item>Uninstalling</span></a>
</li>
</ul>
</li>
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-aiven-operatordocsauthentication-li>
<a href=/aiven-operator/docs/authentication/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-aiven-operatordocsauthentication><span>Authenticating</span></a>
</li>
<li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-aiven-operatordocsresources-li>
<a href=/aiven-operator/docs/resources/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-aiven-operatordocsresources><span>Resources</span></a>
<ul class="ul-2 foldable">
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-aiven-operatordocsresourcesproject-li>
<a href=/aiven-operator/docs/resources/project/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-aiven-operatordocsresourcesproject><span>Aiven Project</span></a>
</li>
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-aiven-operatordocsresourcesproject-vpc-li>
<a href=/aiven-operator/docs/resources/project-vpc/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-aiven-operatordocsresourcesproject-vpc><span>Aiven Project VPC</span></a>
</li>
<li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-aiven-operatordocsresourceskafka-li>
<a href=/aiven-operator/docs/resources/kafka/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-aiven-operatordocsresourceskafka><span>Kafka</span></a>
<ul class="ul-3 foldable">
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-aiven-operatordocsresourceskafkaschema-li>
<a href=/aiven-operator/docs/resources/kafka/schema/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-aiven-operatordocsresourceskafkaschema><span>Kafka Schema</span></a>
</li>
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-aiven-operatordocsresourceskafkaconnect-li>
<a href=/aiven-operator/docs/resources/kafka/connect/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-aiven-operatordocsresourceskafkaconnect><span>Kafka Connect</span></a>
</li>
</ul>
</li>
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-aiven-operatordocsresourcespostgresql-li>
<a href=/aiven-operator/docs/resources/postgresql/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-aiven-operatordocsresourcespostgresql><span>PostgreSQL</span></a>
</li>
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-aiven-operatordocsresourcesservice-integrations-li>
<a href=/aiven-operator/docs/resources/service-integrations/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-aiven-operatordocsresourcesservice-integrations><span>Service Integrations</span></a>
</li>
</ul>
</li>
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-aiven-operatordocstroubleshooting-li>
<a href=/aiven-operator/docs/troubleshooting/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-aiven-operatordocstroubleshooting><span>Troubleshooting</span></a>
</li>
<li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-aiven-operatordocscontributing-li>
<a href=/aiven-operator/docs/contributing/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-aiven-operatordocscontributing><span>Contributing</span></a>
<ul class="ul-2 foldable">
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-aiven-operatordocscontributingdeveloper-guide-li>
<a href=/aiven-operator/docs/contributing/developer-guide/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-aiven-operatordocscontributingdeveloper-guide><span>Developer guide</span></a>
</li>
</ul>
</li>
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-aiven-operatordocsapi-reference-li>
<a href=/aiven-operator/docs/api-reference/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-aiven-operatordocsapi-reference><span>API Reference</span></a>
</li>
</ul>
</li>
</ul>
</nav>
</div>
</aside>
<aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none">
<div class="td-page-meta ml-2 pb-1 pt-2 mb-0">
</div>
<div class=td-toc><nav id=TableOfContents>
<ul>
<li><a href=#-warning->🚨 Warning 🚨</a></li>
<li><a href=#dealing-with-expired-tokens>Dealing with expired tokens</a></li>
<li><a href=#hanging-deletions>Hanging deletions</a></li>
</ul>
</nav></div>
</aside>
<main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main>
<div class=td-content>
<h1>Uninstalling</h1>
<header class=article-meta>
</header>
<h2 id=-warning->🚨 Warning 🚨</h2>
<p>Uninstalling the Aiven Operator for Kubernetes can remove the resources created in Aiven, possibly resulting in data loss.</p>
<p>Depending on your installation, please follow one of:</p>
<ul>
<li><a href=/aiven-operator/docs/installation/helm/#uninstalling>Helm</a></li>
<li><a href=/aiven-operator/docs/installation/kubectl/#uninstalling>kubectl</a></li>
</ul>
<h2 id=dealing-with-expired-tokens>Dealing with expired tokens</h2>
<p>Aiven resources need to have an accompanying secret that contains the token that is used to authorize the manipulation of that resource.
If that token expired then you will not be able to delete the custom resource and deletion will also hang until the situation is resolved.
The recommended approach to deal with that situation is to patch a valid token into the secret again so that proper cleanup of aiven resources can take place.</p>
<h2 id=hanging-deletions>Hanging deletions</h2>
<p>To protect the secrets that the operator is using from deletion, it adds the <a href=https://kubernetes.io/docs/concepts/overview/working-with-objects/finalizers/>finalizer</a> <code>finalizers.aiven.io/needed-to-delete-services</code> to the secret.
This solves a race condition that happens when deleting a namespace, where there is a possibility of the secret getting deleted before the resource that uses it.
When the controller is deleted it may not cleanup the finalizers from all secrets.
If there is a secret with this finalizer blocking deletion of a namespace, for now please do</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>kubectl patch secret &lt;offending-secret&gt; -p <span style=color:#e6db74>&#39;{&#34;metadata&#34;:{&#34;finalizers&#34;:null}}&#39;</span> --type<span style=color:#f92672>=</span>merge
</code></pre></div><p>to remove the finalizer.</p>
<div class=section-index>
<hr class=panel-line>
</div>
<div class="text-muted mt-5 pt-3 border-top">
</div>
</div>
</main>
</div>
</div>
<footer class="bg-dark py-5 row d-print-none">
<div class="container-fluid mx-sm-5">
<div class=row>
<div class="col-6 col-sm-4 text-xs-center order-sm-2">
<ul class="list-inline mb-0">
<li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Aiven Website" aria-label="Aiven Website">
<a class=text-white target=_blank rel=noopener href=https://aiven.io aria-label="Aiven Website">
<i class="fa fa-globe"></i>
</a>
</li>
<li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Twitter aria-label=Twitter>
<a class=text-white target=_blank rel=noopener href=https://twitter.com/aiven_io aria-label=Twitter>
<i class="fab fa-twitter"></i>
</a>
</li>
<li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub>
<a class=text-white target=_blank rel=noopener href=https://github.com/aiven/aiven-operator aria-label=GitHub>
<i class="fab fa-github"></i>
</a>
</li>
</ul>
</div>
<div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
</div>
<div class="col-12 col-sm-4 text-center py-2 order-sm-2">
<small class=text-white>&copy; 2021 Aiven Team, All Rights Reserved</small>
</div>
</div>
</div>
</footer>
</div>
<script src=https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js integrity=sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js integrity=sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF crossorigin=anonymous></script>
<script src=/aiven-operator/js/main.min.53c4d99c5ceabc0c35f44f5ccaa737b46d3fb78d8cfb31c9025e37db2ce7b376.js integrity="sha256-U8TZnFzqvAw19E9cyqc3tG0/t42M+zHJAl432yzns3Y=" crossorigin=anonymous></script>
</body>
</html>